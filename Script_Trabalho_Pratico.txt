-- Tabela Profissionais Superentidade
CREATE TABLE Profissionais (
    Cpf_Profissional BIGINT PRIMARY KEY
);
-- Tabela Cozinheiros (referencia a tabela Pessoas)
CREATE TABLE Cozinheiros ( LIKE Profissionais,
    Nome_Coz VARCHAR(80) NOT NULL,
    Nome_Fantasia VARCHAR(80) NOT NULL,
    Dt_Contrato_Coz DATE NOT NULL,
    Salario_Coz NUMERIC(8, 2),
    Cpf_Coz BIGINT PRIMARY KEY
);

-- Tabela Degustadores (referencia a tabela Pessoas)
CREATE TABLE Degustadores (LIKE Profissionais,
    Nome_Deg VARCHAR(80) NOT NULL,
    Dt_Contrato_Deg DATE NOT NULL,
    Salario_Deg NUMERIC(8, 2),
    Cpf_Deg BIGINT PRIMARY KEY
);

-- Tabela Editores (referencia a tabela Pessoas)
CREATE TABLE Editores (LIKE Profissionais,
    Nome_Edit VARCHAR(80) NOT NULL,
    Dt_Contrato_Edit DATE NOT NULL,
    Salario_Edit NUMERIC(8, 2),
    Cpf_Edit BIGINT PRIMARY KEY
);

-- Tabela Livros
CREATE TABLE Livros (
    ISBN INT PRIMARY KEY,  -- Defina a coluna ISBN como chave prim√°ria
    Titulo VARCHAR(200) NOT NULL
);

-- Tabela Categoria
CREATE TABLE Categoria_Receita (
    Cod_Cat_Rec INT PRIMARY KEY,
    Desc_Cat_Rec VARCHAR(40) NOT NULL
);

-- Tabela Receitas
CREATE TABLE Receitas (
    Cod_Receita INT PRIMARY KEY,
    Nome_Receita VARCHAR(80) NOT NULL,
    Data_Criacao DATE NOT NULL,
    Cpf_Coz BIGINT REFERENCES Cozinheiros(Cpf_Coz),
    Cod_Cat_Rec INT REFERENCES Categoria_Receita(Cod_Cat_Rec),
    ISBN INT REFERENCES Livros(ISBN)
);

-- Tabela Restaurantes
CREATE TABLE Restaurantes (
    Nome_Restaurante VARCHAR(80) NOT NULL,
    Cod_Restaurante INT PRIMARY KEY
);

-- Tabela Ingrediente
CREATE TABLE Ingrediente (
    Cod_Ingrediente INT PRIMARY KEY,
    Nome_Ingrediente VARCHAR(40) NOT NULL
);

-- Tabela Ingredientes_Receita
CREATE TABLE Ingredientes_Receita (
    Cod_Receita INT REFERENCES Receitas(Cod_Receita),
    Cod_Ingrediente INT REFERENCES Ingrediente(Cod_Ingrediente),
    Cpf_Coz BIGINT REFERENCES Cozinheiros(Cpf_Coz),
    Quant_Ingrediente NUMERIC(4, 2),
    Medida VARCHAR(10),
    PRIMARY KEY (Cod_Receita, Cod_Ingrediente,Cpf_Coz)
);

-- Tabela Restaurantes_Cozinheiro
CREATE TABLE Restaurantes_Cozinheiro (
    Cpf_Coz BIGINT REFERENCES Cozinheiros(Cpf_Coz),
    Cod_Restaurante INT REFERENCES Restaurantes(Cod_Restaurante),
    Dt_Contratacao DATE NOT NULL,
    PRIMARY KEY (Cpf_Coz, Cod_Restaurante)
);

-- Tabela Testes
CREATE TABLE Testes (
    Cpf_Deg_Test BIGINT REFERENCES Degustadores(Cpf_Deg),
    Cod_Rec_Test INT REFERENCES Receitas(Cod_Receita),
    Dt_Teste DATE NOT NULL,
    Nota_Teste NUMERIC(8, 2) NOT NULL,
    PRIMARY KEY (Cpf_Deg_Test, Cod_Rec_Test)
);

-- Relacoes

-- Tabela Edita
CREATE TABLE Edita (
    Cpf_Profissional BIGINT REFERENCES Profissionais(Cpf_Profissional),
    ISBN INT REFERENCES Livros(ISBN),
    PRIMARY KEY (Cpf_Profissional, ISBN)
);

-- Tabela Inclui
CREATE TABLE Inclui (
    Cod_Receita INT REFERENCES Receitas(Cod_Receita),
    ISBN INT REFERENCES Livros(ISBN),
    PRIMARY KEY (Cod_Receita,ISBN)
);

-- Tabela Cria
CREATE TABLE Cria (
    Cpf_Coz BIGINT  REFERENCES Cozinheiros(Cpf_Coz),
    Cod_Receita INT REFERENCES Receitas(Cod_Receita),
    PRIMARY KEY (Cpf_Coz, Cod_Receita)
);

-- Tabela Testa
CREATE TABLE Testa (
    Cpf_Deg BIGINT REFERENCES Degustadores(Cpf_Deg),
    Cod_Receita INT REFERENCES Receitas(Cod_Receita),
    PRIMARY KEY (Cpf_Deg, Cod_Receita)
);

-- Tabela Pertence
CREATE TABLE Pertence (
    Cod_Cat_Rec INT REFERENCES Categoria_Receita(Cod_Cat_Rec),
    Cod_Receita INT REFERENCES Receitas(Cod_Receita),
    PRIMARY KEY (Cod_Cat_Rec, Cod_Receita)
);

-- Tabela Possui
CREATE TABLE Possui (
    Cod_Receita INT REFERENCES Receitas(Cod_Receita),
    Cod_Cat_Rec INT REFERENCES Categoria_Receita(Cod_Cat_Rec),
    Cod_Ingrediente INT REFERENCES Ingrediente(Cod_Ingrediente),
    PRIMARY KEY (Cod_Receita, Cod_Cat_Rec, Cod_Ingrediente)
);

-- Tabela EstaPresente
CREATE TABLE EstaPresente (
    Cod_Receita INT REFERENCES Receitas(Cod_Receita),
    Cod_Ingrediente INT REFERENCES Ingrediente(Cod_Ingrediente),
    PRIMARY KEY (Cod_Receita, Cod_Ingrediente)
);

-- Tabela Curriculo
CREATE TABLE Curriculo (
    Cpf_Coz BIGINT REFERENCES Cozinheiros(Cpf_Coz),
    Cod_Restaurante INT REFERENCES Restaurantes (Cod_Restaurante)
);